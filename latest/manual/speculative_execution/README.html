


<!doctype html>
<html class="no-js" lang="en">
  
<head><!-- begin head.html -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>
    Speculative query execution | Scylla Docs
    </title>
    <meta name="description" content="Scylla is an Apache Cassandra-compatible NoSQL data store that can handle 1 million transactions per second on a single server." />

    <link rel="icon" href="../../_static/img/favicon.ico" type="image/x-icon"/>
    <link rel="canonical" href="https://docs.scylladb.com/">

    <link rel="author" href="mailto:info@scylladb.com">
    <link rel="stylesheet" href="../../_static/" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/segment.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/menu.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx_tabs/tabs.css" />
    
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,300,500,700' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/css/foundation.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/doc/main.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>

    <script src="../../_static/js/vendor/modernizr.js"></script>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T8P2JP');</script>
    <!-- End Google Tag Manager -->

    <!-- Marketo -->
    <script type="text/javascript"> (function() { var didInit = false; function initMunchkin() { if(didInit === false) { didInit = true; Munchkin.init('791-QBF-350'); } } var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = '//munchkin.marketo.net/munchkin.js'; s.onreadystatechange = function() { if (this.readyState == 'complete' || this.readyState == 'loaded') { initMunchkin(); } }; s.onload = initMunchkin; document.getElementsByTagName('head')[0].appendChild(s); })(); </script>
    <!-- End Marketo -->

<!-- end head.html -->
</head>

<body>
<header id="header" class="animated">
    <div class="topbar_continer contain-to-grid clearfix">
        <nav class="top-bar" id="top-bar" data-topbar role="navigation">
            <ul class="title-area">
                <li class="name">
                    <div class="logo">
                        <a href="https://docs.scylladb.com/"><img src="../../_static/img/logo-scylla-docs.svg" alt="" width="151"></a>
                    </div>
                </li>
                <li class="toggle-topbar"><a href="#"><span class="icon-manu"></span></a></li>
            </ul>
            <section class="top-bar-section clearfix">
                <ul class="right">
                    
                    <li>
                        <a href="https://scylladb.github.io/java-driver/">Scylla Java Driver</a>
                    </li>
                    
                    <li>
                        <a href="https://docs.scylladb.com/scylla-cloud/">Scylla Cloud</a>
                    </li>
                    
                    <li>
                        <a href="https://university.scylladb.com/">Scylla University</a>
                    </li>
                    
                    <li>
                        <a href="https://www.scylladb.com/">ScyllaDB Home</a>
                    </li>
                    
                    <li class="search_continer show-for-medium-up">	
                        <ci-search></ci-search>	
                    </li>	
                </ul>
            </section>
        </nav>
    </div>
</header>
<section id="content">
    <div class="row">
	
	<div class="large-6 large-push-3 columns">
            <div class="section" id="speculative-query-execution">
<h1>Speculative query execution<a class="headerlink" href="#speculative-query-execution" title="Permalink to this headline">¶</a></h1>
<p>Sometimes a Cassandra node might be experiencing difficulties (ex: long
GC pause) and take longer than usual to reply. Queries sent to that node
will experience bad latency.</p>
<p>One thing we can do to improve that is pre-emptively start a second
execution of the query against another node, before the first node has
replied or errored out. If that second node replies faster, we can send
the response back to the client (we also cancel the first execution –
note that “cancelling” in this context simply means discarding the response
when it arrives later, Cassandra does not support cancellation of in flight
requests at this stage):</p>
<div class="highlight-ditaa notranslate"><div class="highlight"><pre><span></span>client           driver          exec1  exec2
--+----------------+--------------+------+---
  <span class="p">|</span> execute<span class="o">(</span>query<span class="o">)</span> <span class="p">|</span>
  <span class="p">|</span>---------------&gt;<span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span> query host1
  <span class="p">|</span>                <span class="p">|</span>-------------&gt;<span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>              <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>              <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>     query host2
  <span class="p">|</span>                <span class="p">|</span>--------------------&gt;<span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>              <span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>              <span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>     host2 replies   <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>&lt;--------------------<span class="p">|</span>
  <span class="p">|</span>   <span class="nb">complete</span>     <span class="p">|</span>              <span class="p">|</span>
  <span class="p">|</span>&lt;---------------<span class="p">|</span>              <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span> cancel       <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>-------------&gt;<span class="p">|</span>
</pre></div>
</div>
<p>Or the first node could reply just after the second execution was
started. In this case, we cancel the second execution. In other words,
whichever node replies faster “wins” and completes the client query:</p>
<div class="highlight-ditaa notranslate"><div class="highlight"><pre><span></span>client           driver          exec1  exec2
--+----------------+--------------+------+---
  <span class="p">|</span> execute<span class="o">(</span>query<span class="o">)</span> <span class="p">|</span>
  <span class="p">|</span>---------------&gt;<span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span> query host1
  <span class="p">|</span>                <span class="p">|</span>-------------&gt;<span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>              <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>              <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>     query host2
  <span class="p">|</span>                <span class="p">|</span>--------------------&gt;<span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>              <span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>              <span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span> host1 replies<span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>&lt;-------------<span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>   <span class="nb">complete</span>     <span class="p">|</span>                     <span class="p">|</span>
  <span class="p">|</span>&lt;---------------<span class="p">|</span>                     <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span> cancel              <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>--------------------&gt;<span class="p">|</span>
</pre></div>
</div>
<p>Speculative executions are <strong>disabled</strong> by default. The following
sections cover the practical details and how to enable them.</p>
<div class="section" id="query-idempotence">
<h2>Query idempotence<a class="headerlink" href="#query-idempotence" title="Permalink to this headline">¶</a></h2>
<p>If a query is <a class="reference external" href="../idempotence/">not idempotent</a>, the driver will never schedule speculative executions for it, because
there is no way to guarantee that only one node will apply the mutation.</p>
</div>
<div class="section" id="enabling-speculative-executions">
<h2>Enabling speculative executions<a class="headerlink" href="#enabling-speculative-executions" title="Permalink to this headline">¶</a></h2>
<p>Speculative executions are controlled by an instance of
<a class="reference external" href="https://docs.datastax.com/en/drivers/java/3.10/com/datastax/driver/core/policies/SpeculativeExecutionPolicy.html">SpeculativeExecutionPolicy</a> provided when initializing the
<code class="docutils literal notranslate"><span class="pre">Cluster</span></code>.  This policy defines the threshold after which a new
speculative execution will be triggered.</p>
<p>Two implementations are provided with the driver:</p>
<div class="section" id="constantspeculativeexecutionpolicy">
<h3><a class="reference external" href="https://docs.datastax.com/en/drivers/java/3.10/com/datastax/driver/core/policies/ConstantSpeculativeExecutionPolicy.html">ConstantSpeculativeExecutionPolicy</a><a class="headerlink" href="#constantspeculativeexecutionpolicy" title="Permalink to this headline">¶</a></h3>
<p>This simple policy uses a constant threshold:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Cluster</span> <span class="n">cluster</span> <span class="o">=</span> <span class="n">Cluster</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">addContactPoint</span><span class="o">(</span><span class="s">&quot;127.0.0.1&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">withSpeculativeExecutionPolicy</span><span class="o">(</span>
        <span class="k">new</span> <span class="n">ConstantSpeculativeExecutionPolicy</span><span class="o">(</span>
            <span class="mi">500</span><span class="o">,</span> <span class="c1">// delay before a new execution is launched</span>
            <span class="mi">2</span>    <span class="c1">// maximum number of executions</span>
        <span class="o">))</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</pre></div>
</div>
<p>Given the above configuration, an idempotent query would be handled this
way:</p>
<ul class="simple">
<li><p>start the initial execution at t0;</p></li>
<li><p>if no response has been received at t0 + 500 milliseconds, start a
speculative execution on another node;</p></li>
<li><p>if no response has been received at t0 + 1000 milliseconds, start
another speculative execution on a third node.</p></li>
</ul>
</div>
<div class="section" id="percentilespeculativeexecutionpolicy">
<h3><a class="reference external" href="https://docs.datastax.com/en/drivers/java/3.10/com/datastax/driver/core/policies/PercentileSpeculativeExecutionPolicy.html">PercentileSpeculativeExecutionPolicy</a><a class="headerlink" href="#percentilespeculativeexecutionpolicy" title="Permalink to this headline">¶</a></h3>
<p>This policy sets the threshold at a given latency percentile for the
current host, based on recent statistics.</p>
<p>First and foremost, make sure that the <a class="reference external" href="http://hdrhistogram.github.io/HdrHistogram/">HdrHistogram</a> library (used
under the hood to collect latencies) is in your classpath. It’s defined
as an optional dependency in the driver’s POM, so you’ll need to
explicitly depend on it:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.hdrhistogram<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>HdrHistogram<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>2.1.10<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
<p>Then create a <a class="reference external" href="https://docs.datastax.com/en/drivers/java/3.10/com/datastax/driver/core/PercentileTracker.html">PercentileTracker</a> that will collect latency histograms for your <code class="docutils literal notranslate"><span class="pre">Cluster</span></code>. Two
implementations are provided out of the box:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.datastax.com/en/drivers/java/3.10/com/datastax/driver/core/ClusterWidePercentileTracker.html">ClusterWidePercentileTracker</a>: maintains a single histogram for the whole cluster. This means
queries will be compared against the global performance of all the hosts in the cluster.</p></li>
<li><p><a class="reference external" href="https://docs.datastax.com/en/drivers/java/3.10/com/datastax/driver/core/PerHostPercentileTracker.html">PerHostPercentileTracker</a>: maintains a histogram per host. This means queries to a host will
only be compared against previous queries to the same host.</p></li>
</ul>
<p>We recommend the cluster-wide strategy: in practice, we’ve found that it produces better results,
because it does a better job at penalizing hosts that are consistently slower.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// There are more options than shown here, please refer to the API docs</span>
<span class="c1">// for more information</span>
<span class="n">PercentileTracker</span> <span class="n">tracker</span> <span class="o">=</span> <span class="n">ClusterWidePercentileTracker</span>
    <span class="o">.</span><span class="na">builder</span><span class="o">(</span><span class="mi">15000</span><span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</pre></div>
</div>
<p>Create an instance of the policy with the tracker, and pass it to your
cluster:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">PercentileSpeculativeExecutionPolicy</span> <span class="n">policy</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">PercentileSpeculativeExecutionPolicy</span><span class="o">(</span>
        <span class="n">tracker</span><span class="o">,</span>
        <span class="mf">99.0</span><span class="o">,</span>     <span class="c1">// percentile</span>
        <span class="mi">2</span><span class="o">);</span>       <span class="c1">// maximum number of executions</span>

<span class="n">Cluster</span> <span class="n">cluster</span> <span class="o">=</span> <span class="n">Cluster</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">addContactPoint</span><span class="o">(</span><span class="s">&quot;127.0.0.1&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">withSpeculativeExecutionPolicy</span><span class="o">(</span><span class="n">policy</span><span class="o">)</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">PercentileTracker</span></code> may also be used with a slow query
logger (see the <a class="reference external" href="../logging/">Logging</a> section). In that case, you would
create a single tracker object and share it with both components.</p>
</div>
<div class="section" id="using-your-own">
<h3>Using your own<a class="headerlink" href="#using-your-own" title="Permalink to this headline">¶</a></h3>
<p>As with all policies, you are free to provide your own by implementing
<code class="docutils literal notranslate"><span class="pre">SpeculativeExecutionPolicy</span></code>.</p>
</div>
</div>
<div class="section" id="how-speculative-executions-affect-retries">
<h2>How speculative executions affect retries<a class="headerlink" href="#how-speculative-executions-affect-retries" title="Permalink to this headline">¶</a></h2>
<p>Turning speculative executions on doesn’t change the driver’s <a class="reference external" href="../retries/">retry</a> behavior. Each
parallel execution will trigger retries independently:</p>
<div class="highlight-ditaa notranslate"><div class="highlight"><pre><span></span>client           driver          exec1  exec2
--+----------------+--------------+------+---
  <span class="p">|</span> execute<span class="o">(</span>query<span class="o">)</span> <span class="p">|</span>
  <span class="p">|</span>---------------&gt;<span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span> query host1
  <span class="p">|</span>                <span class="p">|</span>-------------&gt;<span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>              <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span> unavailable  <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>&lt;-------------<span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>retry at lower CL
  <span class="p">|</span>                <span class="p">|</span>-------------&gt;<span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>              <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>     query host2
  <span class="p">|</span>                <span class="p">|</span>--------------------&gt;<span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>              <span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>     server error    <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>&lt;--------------------<span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>              <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>   retry on host3
  <span class="p">|</span>                <span class="p">|</span>--------------------&gt;<span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>              <span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span> host1 replies<span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>&lt;-------------<span class="p">|</span>      <span class="p">|</span>
  <span class="p">|</span>   <span class="nb">complete</span>     <span class="p">|</span>                     <span class="p">|</span>
  <span class="p">|</span>&lt;---------------<span class="p">|</span>                     <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span> cancel              <span class="p">|</span>
  <span class="p">|</span>                <span class="p">|</span>--------------------&gt;<span class="p">|</span>
</pre></div>
</div>
<p>The only impact is that all executions of the same query always share
the same query plan, so each host will be used by at most one execution.</p>
</div>
<div class="section" id="tuning-and-practical-details">
<h2>Tuning and practical details<a class="headerlink" href="#tuning-and-practical-details" title="Permalink to this headline">¶</a></h2>
<p>The goal of speculative executions is to improve overall latency (the
time between <code class="docutils literal notranslate"><span class="pre">execute(query)</span></code> and <code class="docutils literal notranslate"><span class="pre">complete</span></code> in the diagrams above) at
high percentiles. On the flipside, they cause the driver to send more
individual requests, so throughput will not necessarily improve.</p>
<p>You can monitor how many speculative executions were triggered with the
<code class="docutils literal notranslate"><span class="pre">speculative-executions</span></code> metric (exposed in the Java API as
<a class="reference external" href="https://docs.datastax.com/en/drivers/java/3.10/com/datastax/driver/core/Metrics.Errors.html#getSpeculativeExecutions--">cluster.getMetrics().getErrors().getSpeculativeExecutions()</a>).
It should only be a few percents of the total number of requests
(<a class="reference external" href="https://docs.datastax.com/en/drivers/java/3.10/com/datastax/driver/core/Metrics.html#getRequestsTimer--">cluster.getMetrics().getRequestsTimer().getCount()</a>).</p>
<div class="section" id="stream-id-exhaustion">
<h3>Stream id exhaustion<a class="headerlink" href="#stream-id-exhaustion" title="Permalink to this headline">¶</a></h3>
<p>One side-effect of speculative executions is that many requests are
cancelled, which can lead to a phenomenon called <em>stream id exhaustion</em>:
each TCP connection can handle multiple simultaneous requests,
identified by a unique number called <em>stream id</em>. When a request gets
cancelled, we can’t reuse its stream id immediately because we might
still receive a response from the server later. If this happens often,
the number of available stream ids diminishes over time, and when it
goes below a given threshold we close the connection and create a new
one. If requests are often cancelled, so will see connections being
recycled at a high rate.</p>
<p>One way to detect this is to monitor open connections per host
(<a class="reference external" href="https://docs.datastax.com/en/drivers/java/3.10/com/datastax/driver/core/Session.State.html">Session.getState().getOpenConnections(host)</a>) against
TCP connections at the OS level. If open connections stay constant but
you see many TCP connections in closing states, you might be running
into this issue. Try raising the speculative execution threshold.</p>
<p>This problem is more likely to happen with version 2 of the native
protocol, because each TCP connection only has 128 stream ids. With
version 3 (driver 2.1.2 or above with Cassandra 2.1 or above), there are
32K stream ids per connection, so higher cancellation rates can be
sustained. If you’re unsure of which native protocol version you’re
using, you can check with
<a class="reference external" href="https://docs.datastax.com/en/drivers/java/3.10/com/datastax/driver/core/ProtocolOptions.html#getProtocolVersion--">cluster.getConfiguration().getProtocolOptions().getProtocolVersion()</a>.</p>
</div>
<div class="section" id="request-ordering-and-client-timestamps">
<h3>Request ordering and client timestamps<a class="headerlink" href="#request-ordering-and-client-timestamps" title="Permalink to this headline">¶</a></h3>
<p>Another issue that might arise is that you get unintuitive results
because of request ordering. Suppose you run the following query with
speculative executions enabled:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">insert</span> <span class="n">into</span> <span class="n">my_table</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="n">values</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
<p>The first execution is a bit too slow, so a second execution gets
triggered. Finally, the first execution completes, so the client code
gets back an acknowledgement, and the second execution is cancelled.
However, cancelling only means that the driver stops waiting for the
server’s response, the request could still be “on the wire”; let’s
assume that this is the case.</p>
<p>Now you run the following query, which completes successfully:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">delete</span> <span class="kn">from</span> <span class="nn">my_table</span> <span class="n">where</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
<p>But now the second execution of the first query finally reaches its
target node, which applies the mutation. The row that you’ve just
deleted is back!</p>
<p>The workaround is to use a timestamp with your queries:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">insert</span> <span class="n">into</span> <span class="n">my_table</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="n">values</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="n">USING</span> <span class="n">TIMESTAMP</span> <span class="mi">1432764000</span><span class="p">;</span>
</pre></div>
</div>
<p>If you’re using native protocol v3, you can also enable <a class="reference external" href="../query_timestamps/#client-side-generation">client-side
timestamps</a> to have this done
automatically.</p>
</div>
</div>
</div>

        </div>

        <div id="sidebar" class="large-3 large-pull-6 columns"><div class="side-nav">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../api.html">API Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../README.html">Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../address_resolution/README.html">Address resolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../async/README.html">Asynchronous programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auth/README.html">Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cloud/README.html">Connecting to Apollo (Cloud)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../compression/README.html">Compression</a></li>
<li class="toctree-l2"><a class="reference internal" href="../control_connection/README.html">Control connection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../custom_codecs/README.html">Custom Codecs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../custom_payloads/README.html">Custom Payloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../idempotence/README.html">Query idempotence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../load_balancing/README.html">Load balancing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging/README.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metadata/README.html">Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics/README.html">Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../native_protocol/README.html">Native protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../object_mapper/README.html">Object Mapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../osgi/README.html">OSGi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../paging/README.html">Paging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pooling/README.html">Connection pooling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../query_timestamps/README.html">Query timestamps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reconnection/README.html">Reconnection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../retries/README.html">Retries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shaded_jar/README.html">Using the shaded JAR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socket_options/README.html">Socket options</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Speculative query execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ssl/README.html">SSL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../statements/README.html">Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tuples/README.html">Using Tuples with the Java driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../udts/README.html">User-defined types</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../upgrade_guide/README.html">Upgrade guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/README.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog/README.html">Changelog</a></li>
</ul>

</div>
        </div>

        <div class="large-3 columns">
            
        </div>

    </div>
</section>

<!-- newsleter modal -->

<div id="newsletter_signup" class="reveal-modal tiny radius dark_modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
    <a class="close-reveal-modal" aria-label="Close">×</a>
    <h2 id="modalTitle">Sign up for the Scylla newsletter</h2>
    <div id="mc_embed_signup">
        <form action="//cloudius-systems.us10.list-manage.com/subscribe/post?u=df8bb543c68230d5f7b4dcf78&amp;id=9a4589f144" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="">
            <div id="mc_embed_signup_scroll">

                <div class="mc-field-group">
                    <div class="row collapse">
                        <div class="small-3 columns"><label for="mce-EMAIL">Email</label></div>
                        <div class="small-9 columns"><input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL"></div>
                    </div>
                </div>
                <div class="mc-field-group">
                    <div class="row collapse">
                        <div class="small-3 columns"><label for="mce-FNAME">First Name </label></div>
                        <div class="small-9 columns"><input type="text" value="" name="FNAME" class="" id="mce-FNAME"></div>
                    </div>
                </div>
                <div class="mc-field-group">
                    <div class="row collapse">
                        <div class="small-3 columns"><label for="mce-LNAME">Last Name </label></div>
                        <div class="small-9 columns"><input type="text" value="" name="LNAME" class="" id="mce-LNAME"></div>
                    </div>
                </div>
                <div id="mce-responses" class="clear">
                    <div class="response" id="mce-error-response" style="display:none"></div>
                    <div class="response" id="mce-success-response" style="display:none"></div>
                </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                <div style="position: absolute; left: -5000px;"><input type="text" name="b_df8bb543c68230d5f7b4dcf78_9a4589f144" tabindex="-1" value=""></div>
                <div class="clear"><input type="submit" class="button" value="Sign up" name="subscribe" id="mc-embedded-subscribe"></div>
            </div>
        </form>
    </div>
</div>

<!-- end newsleter modal -->



<!-- footer.html -->
<footer id="footer">
    <div class="footer-top">
        <a class="logo" href="https://www.scylladb.com"><img src="../../_static/img/logo-scylla-horizontal-RGB.svg" alt=""></a>
        <div class="footer-links">
            <a class="link" href="https://docs.scylladb.com">Docs</a>
            <a class="link" href="https://www.scylladb.com/company/contact-us/">Contact Us</a>
            <a class="link" href="https://www.scylladb.com/company/">About Us</a>
            <a class="link button" href="https://github.com/scylladb/java-driver/issues/new?title=Issue in page Speculative query execution&&body=I%20would%20like%20to%20report%20an%20issue%20in%20page%20http://docs.scylladb.com/manual/speculative_execution/README%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix" target="_blank">
                Report an issue on this page</a>
        </div>
        <div class="footer-actions">
            <a class="link-icon" href="https://github.com/ScyllaDB" target="_blank">
                <span class="icon-github2"></span></a>
            <a class="link-icon" href="https://twitter.com/ScyllaDB" target="_blank">
                <span class="icon-twitter"></span></a>
            <a class="link-icon" href="https://www.linkedin.com/company/scylladb"  target="_blank">
                <span class="icon-linkedin2"></span></a>
            <a class="link-icon" href="https://www.facebook.com/scylladb/" target="_blank">
                <span class="icon-facebook"></span></a>
        </div>
    </div>

    <div class="footer-bottom">
        <div class="footer-info">
            <div class="footer-copyright">
                &#169; 2012, ScyllaDB. All rights reserved.
            </div>
            <div class="footer-last-updated">
                Last updated on 20 October 2020.
            </div>
        </div>
        <div class="footer-links">
        </div>
    </div>
</footer>
<!-- end footer.html -->

<!-- bodyscripts.html -->
<!-- at the end of the BODY --> 
<script src="../../_static/js/vendor/jquery.js"></script>
<script src="../../_static/expertrec.js"></script>
<script src="../../_static/js/foundation/foundation.js"></script>
<script src="../../_static/js/foundation/foundation.topbar.js"></script>
<script src="../../_static/app.js"></script>
<script>
    $(document).foundation();
</script>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T8P2JP"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

  <!-- end bodyscripts.html -->
</body>
</html>