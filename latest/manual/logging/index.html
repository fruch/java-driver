


<!doctype html>
<html class="no-js" lang="en">
  
<head><!-- begin head.html -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>
    Logging | Scylla Docs
    </title>
    <meta name="description" content="Scylla is an Apache Cassandra-compatible NoSQL data store that can handle 1 million transactions per second on a single server." />

    <link rel="icon" href="../../_static/img/favicon.ico" type="image/x-icon"/>
    <link rel="canonical" href="https://docs.scylladb.com/">

    <link rel="author" href="mailto:info@scylladb.com">
    <link rel="stylesheet" href="../../_static/" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/segment.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/menu.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx_tabs/tabs.css" />
    
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,300,500,700' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.2/css/foundation.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/doc/main.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>

    <script src="../../_static/js/vendor/modernizr.js"></script>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T8P2JP');</script>
    <!-- End Google Tag Manager -->

    <!-- Marketo -->
    <script type="text/javascript"> (function() { var didInit = false; function initMunchkin() { if(didInit === false) { didInit = true; Munchkin.init('791-QBF-350'); } } var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = '//munchkin.marketo.net/munchkin.js'; s.onreadystatechange = function() { if (this.readyState == 'complete' || this.readyState == 'loaded') { initMunchkin(); } }; s.onload = initMunchkin; document.getElementsByTagName('head')[0].appendChild(s); })(); </script>
    <!-- End Marketo -->

<!-- end head.html -->
</head>

<body>
<header id="header" class="animated">
    <div class="topbar_continer contain-to-grid clearfix">
        <nav class="top-bar" id="top-bar" data-topbar role="navigation">
            <ul class="title-area">
                <li class="name">
                    <div class="logo">
                        <a href="https://docs.scylladb.com/"><img src="../../_static/img/logo-scylla-docs.svg" alt="" width="151"></a>
                    </div>
                </li>
                <li class="toggle-topbar"><a href="#"><span class="icon-manu"></span></a></li>
            </ul>
            <section class="top-bar-section clearfix">
                <ul class="right">
                    
                    <li>
                        <a href="https://scylladb.github.io/java-driver/">Scylla Java Driver</a>
                    </li>
                    
                    <li>
                        <a href="https://docs.scylladb.com/scylla-cloud/">Scylla Cloud</a>
                    </li>
                    
                    <li>
                        <a href="https://university.scylladb.com/">Scylla University</a>
                    </li>
                    
                    <li>
                        <a href="https://www.scylladb.com/">ScyllaDB Home</a>
                    </li>
                    
                    <li class="search_continer show-for-medium-up">	
                        <ci-search></ci-search>	
                    </li>	
                </ul>
            </section>
        </nav>
    </div>
</header>
<section id="content">
    <div class="row">
	
	<div class="large-6 large-push-3 columns">
            <div class="section" id="logging">
<h1>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h1>
<div class="section" id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>DataStax Java driver uses the popular <a class="reference external" href="http://www.slf4j.org">SLF4J</a> library to emit log messages;
SLF4J has the advantage of providing a logging API that is entirely decoupled from concrete
implementations, letting client applications free to seamlessly connect SLF4J to their preferred logging backend.</p>
<p>The driver itself does not attempt to configure any concrete logging framework.
It is up to client applications using the driver to correctly set up their classpath and
runtime configuration to be able to capture log messages emitted by the driver.
Concretely, client applications need to provide, at runtime, a <em>binding</em> to any logging framework
of their choice that is <a class="reference external" href="http://www.slf4j.org/manual.html#swapping">compatible with SLF4J</a>.</p>
<p>If your application is built with Maven, this usually involves adding one (runtime) dependency to your POM file.
For example, if you intend to use <a class="reference external" href="http://logback.qos.ch">Logback</a>, add the following dependency:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
	<span class="nt">&lt;groupId&gt;</span>ch.qos.logback<span class="nt">&lt;/groupId&gt;</span>
	<span class="nt">&lt;artifactId&gt;</span>logback-classic<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;version&gt;</span>1.2.3<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
<p>If you are using Log4J 1.2 instead, add the following dependency:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>slf4j-log4j12<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.7.25<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
<p>Check <a class="reference external" href="http://www.slf4j.org/manual.html#projectDep">SLF4J’s documentation</a> for examples for
other logging frameworks, and for troubleshooting dependency resolution problems.</p>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>Each logging framework has its own configuration rules, but all of them provide
different levels (DEBUG, INFO, WARN, ERROR…), different <em>loggers</em> or <em>categories</em>
(messages from different categories or loggers can be filtered out separately or printed out
differently), and different <em>appenders</em> (message receptacles such as the standard console,
the error console, a file on disk, a socket…).</p>
<p>Check your logging framework documentation for more information about how to properly configure it.
You can also find some configuration examples below.</p>
</div>
<div class="section" id="useful-loggers">
<h2>Useful loggers<a class="headerlink" href="#useful-loggers" title="Permalink to this headline">¶</a></h2>
<p>When debugging the Java driver, the following loggers could be particularly useful
and provide hints about what’s going wrong.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">com.datastax.driver.core.Cluster</span></code></p>
<ul>
<li><p>ERROR</p>
<ul>
<li><p>Authentication errors</p></li>
<li><p>Unexpected errors when handling events, reconnecting, refreshing schemas</p></li>
<li><p>Unexpected events</p></li>
</ul>
</li>
<li><p>WARN</p>
<ul>
<li><p>Cluster name mismatches</p></li>
<li><p>Unreachable contact points</p></li>
<li><p>Unsupported protocol versions</p></li>
<li><p>Schema disagreements</p></li>
<li><p>Ignored notifications due to high contention</p></li>
</ul>
</li>
<li><p>INFO</p>
<ul>
<li><p>Hosts added or removed</p></li>
</ul>
</li>
<li><p>DEBUG</p>
<ul>
<li><p>Cluster lifecycle (start, shutdown)</p></li>
<li><p>Event delivery notifications (schema changes, topology changes)</p></li>
<li><p>Topology change events: hosts Up / Down / Added / Removed</p></li>
<li><p>Hosts being ignored</p></li>
<li><p>Protocol version negotiation</p></li>
<li><p>Reconnection attempts</p></li>
<li><p>Schema metadata refreshes</p></li>
</ul>
</li>
<li><p>TRACE</p>
<ul>
<li><p>Connection pools lifecycle (create, renew, refresh)</p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">com.datastax.driver.core.Session</span></code></p>
<ul>
<li><p>ERROR</p>
<ul>
<li><p>Errors related to connection pools</p></li>
</ul>
</li>
<li><p>WARN</p>
<ul>
<li><p>Problems related to connection pools</p></li>
</ul>
</li>
<li><p>DEBUG</p>
<ul>
<li><p>Connection pools lifecycle (create, renew, refresh)</p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">com.datastax.driver.core.RequestHandler</span></code></p>
<ul>
<li><p>ERROR</p>
<ul>
<li><p>Unexpected errors preparing queries</p></li>
<li><p>Queries sent to a bootstrapping host</p></li>
<li><p>Unexpected server errors</p></li>
</ul>
</li>
<li><p>WARN</p>
<ul>
<li><p>Queries sent to an overloaded host</p></li>
</ul>
</li>
<li><p>INFO</p>
<ul>
<li><p>Unprepared queries</p></li>
</ul>
</li>
<li><p>DEBUG</p>
<ul>
<li><p>Retry attempts</p></li>
</ul>
</li>
<li><p>TRACE</p>
<ul>
<li><p>Host currently being queried</p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">com.datastax.driver.core.Connection</span></code></p>
<ul>
<li><p>WARN</p>
<ul>
<li><p>Problem setting keyspace</p></li>
<li><p>Errors closing Netty channel</p></li>
</ul>
</li>
<li><p>DEBUG</p>
<ul>
<li><p>Connection lifecycle (open, close, defunct)</p></li>
<li><p>Error connecting or writing requests</p></li>
<li><p>Heartbeats</p></li>
</ul>
</li>
<li><p>TRACE</p>
<ul>
<li><p>Authentication progress</p></li>
<li><p>Sending requests</p></li>
<li><p>Receiving responses</p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">com.datastax.driver.core.Message</span></code></p>
<ul>
<li><p>TRACE</p>
<ul>
<li><p>Custom payloads</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="logging-query-latencies">
<h2>Logging query latencies<a class="headerlink" href="#logging-query-latencies" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">QueryLogger</span></code> provides clients with the ability to log queries
executed by the driver, and especially, it allows client to track slow
queries, i.e. queries that take longer to complete than a configured
threshold in milliseconds.</p>
<p>To turn on this feature, you first need to instantiate and register a <code class="docutils literal notranslate"><span class="pre">QueryLogger</span></code> instance:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Cluster</span> <span class="n">cluster</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">QueryLogger</span> <span class="n">queryLogger</span> <span class="o">=</span> <span class="n">QueryLogger</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">withConstantThreshold</span><span class="o">(...)</span>
    <span class="o">.</span><span class="na">withMaxQueryStringLength</span><span class="o">(...)</span>
<span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="n">cluster</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">queryLogger</span><span class="o">);</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">QueryLogger</span></code> instances are thread-safe and can be shared cluster-wide.
Besides, you can adjust several parameters such as the maximum query string length to be printed,
the maximum number of parameters to print, etc. Refer to the
<code class="docutils literal notranslate"><span class="pre">QueryLogger</span></code> <a class="reference external" href="https://scylladb.github.io/java-driver/latest/api/com/datastax/driver/core/QueryLogger.html">API docs</a> for more information.</p>
<p>Secondly, you need to adjust your logging framework to accept log messages from the <code class="docutils literal notranslate"><span class="pre">QueryLogger</span></code>. The <code class="docutils literal notranslate"><span class="pre">QueryLogger</span></code>
uses 3 different loggers:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">com.datastax.driver.core.QueryLogger.NORMAL</span></code> : Used to log normal queries, i.e., queries that completed successfully within a configurable threshold in milliseconds.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">com.datastax.driver.core.QueryLogger.SLOW</span></code> : Used to log slow queries, i.e., queries that completed successfully but that took longer than a configurable threshold in milliseconds to complete.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">com.datastax.driver.core.QueryLogger.ERROR</span></code>: Used to log unsuccessful queries, i.e., queries that did not complete normally and threw an exception. Note this this logger will also print the full stack trace of the reported exception.</p></li>
</ul>
<p>You need to set the above loggers to DEBUG level to turn them on. E.g. to track queries
that take more than 300 ms to complete, configure your <code class="docutils literal notranslate"><span class="pre">QueryLogger</span></code> with that threshold (see above),
then set the <code class="docutils literal notranslate"><span class="pre">com.datastax.driver.core.QueryLogger.SLOW</span></code> logger to DEBUG, e.g. with Log4J:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>  <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">&quot;com.datastax.driver.core.QueryLogger.SLOW&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;level</span> <span class="na">value=</span><span class="s">&quot;DEBUG&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/logger&gt;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">QueryLogger</span></code> would then print messages such as this for every slow query:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>DEBUG [cluster1] [/127.0.0.1:9042] Query too slow, took 329 ms: SELECT * FROM users WHERE user_id=?;
</pre></div>
</div>
<p>As you can see, actual query parameters are not logged; if you want them to be printed as well, set the <code class="docutils literal notranslate"><span class="pre">com.datastax.driver.core.QueryLogger.SLOW</span></code> logger
to TRACE instead, e.g. with Log4J:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>  <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">&quot;com.datastax.driver.core.QueryLogger.SLOW&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;level</span> <span class="na">value=</span><span class="s">&quot;TRACE&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/logger&gt;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">QueryLogger</span></code> would then print messages such as this for every slow query:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>TRACE [cluster1] [/127.0.0.1:9042] Query too slow, took 329 ms: SELECT * FROM users WHERE user_id=? [user_id=42];
</pre></div>
</div>
<p>Be careful when logging large query strings (specially batches) and/or queries with considerable amounts of parameters.
See the <code class="docutils literal notranslate"><span class="pre">QueryLogger</span></code> <a class="reference external" href="https://scylladb.github.io/java-driver/latest/api/com/datastax/driver/core/QueryLogger.html">API docs</a> for examples of how to truncate the printed message when necessary.</p>
<div class="section" id="constant-vs-dynamic-thresholds">
<h3>Constant vs Dynamic thresholds<a class="headerlink" href="#constant-vs-dynamic-thresholds" title="Permalink to this headline">¶</a></h3>
<p>Currently the <code class="docutils literal notranslate"><span class="pre">QueryLogger</span></code> can be configured to track slow queries using either
a constant threshold in milliseconds (which is the default behavior), or
a dynamic threshold based on per-host latency percentiles, as computed by a <code class="docutils literal notranslate"><span class="pre">PercentileTracker</span></code>.</p>
<p>Refer to the <code class="docutils literal notranslate"><span class="pre">QueryLogger</span></code> <a class="reference external" href="https://scylladb.github.io/java-driver/latest/api/com/datastax/driver/core/QueryLogger.html">API docs</a> for an example of usage.</p>
</div>
</div>
<div class="section" id="performance-tips">
<h2>Performance Tips<a class="headerlink" href="#performance-tips" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Use asynchronous appenders; both <a class="reference external" href="http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/AsyncAppender.html">Log4J</a>
and <a class="reference external" href="http://logback.qos.ch/manual/appenders.html#AsyncAppender">Logback</a> provide asynchronous appenders
that can significantly boost latencies when writing log messages.</p></li>
<li><p>While the driver does not provide such capability, it is possible for client applications to hot-reload the log configuration
without stopping the application. This usually involves JMX and is available for <a class="reference external" href="http://logback.qos.ch/manual/jmxConfig.html">Logback</a>;
Log4J provides a <code class="docutils literal notranslate"><span class="pre">configureAndWatch()</span></code> method but it is not recommended to use it inside J2EE containers (see <a class="reference external" href="https://logging.apache.org/log4j/1.2/faq.html#a3.6">FAQ</a>).</p></li>
</ul>
</div>
<div class="section" id="server-side-warnings">
<h2>Server Side Warnings<a class="headerlink" href="#server-side-warnings" title="Permalink to this headline">¶</a></h2>
<p>When using the driver to execute queries, it is possible that the server will generate warnings and
return them along with the results. Consider the following query:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">cycling</span><span class="p">.</span><span class="n">cyclist_name</span><span class="p">;</span>
</pre></div>
</div>
<p>Executing this query would generate a warning in Cassandra:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Aggregation</span> <span class="n">query</span> <span class="n">used</span> <span class="n">without</span> <span class="n">partition</span> <span class="n">key</span>
</pre></div>
</div>
<p>These
<a class="reference external" href="https://scylladb.github.io/java-driver/latest/api/com/datastax/driver/core/ExecutionInfo.html#getWarnings--">query warnings</a>
are available programmatically from the
<a class="reference external" href="https://scylladb.github.io/java-driver/latest/api/com/datastax/driver/core/ExecutionInfo.html">ExecutionInfo</a>
via
<a class="reference external" href="https://scylladb.github.io/java-driver/latest/api/com/datastax/driver/core/ResultSet.html">ResultSet</a>’s
<a class="reference external" href="https://scylladb.github.io/java-driver/latest/api/com/datastax/driver/core/PagingIterable.html#getExecutionInfo--">getExecutionInfo()</a>
method. They are also logged by the driver:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WARN</span>  <span class="n">com</span><span class="o">.</span><span class="n">datastax</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">RequestHandler</span> <span class="o">-</span> <span class="n">Query</span> <span class="s1">&#39;SELECT count(*) FROM cycling.cyclist_name&#39;</span> <span class="n">generated</span> <span class="n">server</span> <span class="n">side</span> <span class="n">warning</span><span class="p">(</span><span class="n">s</span><span class="p">):</span> <span class="n">Aggregation</span> <span class="n">query</span> <span class="n">used</span> <span class="n">without</span> <span class="n">partition</span> <span class="n">key</span>
</pre></div>
</div>
<p>Sometimes, it is not desirable for the driver to log server-side warnings. In such cases, logging
these warnings can be disabled in the driver by setting the system property <code class="docutils literal notranslate"><span class="pre">com.datastax.driver.DISABLE_QUERY_WARNING_LOGS</span></code>
to “true”. This can be done at application startup (<code class="docutils literal notranslate"><span class="pre">-Dcom.datastax.driver.DISABLE_QUERY_WARNING_LOGS=true</span></code>)
or it can be toggled programmatically in application code:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// disable driver logging of server-side warnings</span>
<span class="n">System</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">&quot;com.datastax.driver.DISABLE_QUERY_WARNING_LOGS&quot;</span><span class="o">,</span> <span class="s">&quot;true&quot;</span><span class="o">);</span>
<span class="o">....</span>
<span class="c1">// enable driver logging of server-side warnings</span>
<span class="n">System</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">&quot;com.datastax.driver.DISABLE_QUERY_WARNING_LOGS&quot;</span><span class="o">,</span> <span class="s">&quot;false&quot;</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="logback-example">
<h2>Logback Example<a class="headerlink" href="#logback-example" title="Permalink to this headline">¶</a></h2>
<p>Here is a typical example configuration for Logback. <em>Please adapt it to your specific needs before using it!</em></p>
<p>It logs messages to the console with levels equal to or higher than INFO, and logs all messages to a rolling file.
By default, only messages with ERROR level or higher are logged.</p>
<p>It also turns on slow query tracing as described above.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;configuration&gt;</span>
 
    <span class="c">&lt;!-- log INFO or higher messages to the console --&gt;</span>
	<span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">&quot;console&quot;</span> <span class="na">class=</span><span class="s">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;encoder&gt;</span>
            <span class="nt">&lt;pattern&gt;</span>%-5p %msg%n<span class="nt">&lt;/pattern&gt;</span>
        <span class="nt">&lt;/encoder&gt;</span>
	<span class="nt">&lt;/appender&gt;</span>
 
    <span class="c">&lt;!-- log everything to a rolling file --&gt;</span>
	<span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">&quot;file&quot;</span> <span class="na">class=</span><span class="s">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span><span class="nt">&gt;</span>
		<span class="nt">&lt;file&gt;</span>driver.log<span class="nt">&lt;/file&gt;</span>
		<span class="nt">&lt;encoder&gt;</span>
			<span class="nt">&lt;pattern&gt;</span>%-5p [%d{ISO8601}] [%t] %F:%L - %msg%n<span class="nt">&lt;/pattern&gt;</span>
		<span class="nt">&lt;/encoder&gt;</span>
        <span class="nt">&lt;rollingPolicy</span> <span class="na">class=</span><span class="s">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span><span class="nt">&gt;</span>
            <span class="c">&lt;!-- daily rollover --&gt;</span>
            <span class="nt">&lt;fileNamePattern&gt;</span>driver.%d{yyyy-MM-dd}.log<span class="nt">&lt;/fileNamePattern&gt;</span>
            <span class="c">&lt;!-- keep 30 days&#39; worth of history --&gt;</span>
            <span class="nt">&lt;maxHistory&gt;</span>30<span class="nt">&lt;/maxHistory&gt;</span>
    <span class="nt">&lt;/rollingPolicy&gt;</span>
    <span class="nt">&lt;/appender&gt;</span>
 
    <span class="c">&lt;!-- use AsyncAppender for lower latencies --&gt;</span>
    <span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">&quot;async&quot;</span> <span class="na">class=</span><span class="s">&quot;ch.qos.logback.classic.AsyncAppender&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">&quot;console&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">&quot;file&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/appender&gt;</span>
   
    <span class="c">&lt;!--</span>
<span class="c">    Turn on slow query logging by setting this logger to DEBUG; </span>
<span class="c">    set level to TRACE to also log query parameters </span>
<span class="c">    --&gt;</span>
    <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">&quot;com.datastax.driver.core.QueryLogger.SLOW&quot;</span> <span class="na">level=</span><span class="s">&quot;DEBUG&quot;</span> <span class="nt">/&gt;</span>

	<span class="nt">&lt;root</span> <span class="na">level=</span><span class="s">&quot;ERROR&quot;</span><span class="nt">&gt;</span>
		<span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">&quot;async&quot;</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;/root&gt;</span>
 
<span class="nt">&lt;/configuration&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="log4j-example">
<h2>Log4J Example<a class="headerlink" href="#log4j-example" title="Permalink to this headline">¶</a></h2>
<p>Here is a typical example configuration for Log4J. <em>Please adapt it to your specific needs before using it!</em></p>
<p>It logs messages to the console with levels equal to or higher than INFO, and logs all messages to a rolling file.
By default, only messages with ERROR level or higher are logged.</p>
<p>It also turns on slow query tracing as described above.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;log4j:configuration&gt;</span>

  <span class="c">&lt;!-- log INFO or higher messages to the console --&gt;</span>
  <span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">&quot;console&quot;</span> <span class="na">class=</span><span class="s">&quot;org.apache.log4j.ConsoleAppender&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;threshold&quot;</span> <span class="na">value=</span><span class="s">&quot;INFO&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;layout</span> <span class="na">class=</span><span class="s">&quot;org.apache.log4j.PatternLayout&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;ConversionPattern&quot;</span> <span class="na">value=</span><span class="s">&quot;%-5p %m%n&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/layout&gt;</span>
  <span class="nt">&lt;/appender&gt;</span>
  
  <span class="c">&lt;!-- log everything to a rolling file --&gt;</span>
  <span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">&quot;file&quot;</span> <span class="na">class=</span><span class="s">&quot;org.apache.log4j.RollingFileAppender&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;file&quot;</span> <span class="na">value=</span><span class="s">&quot;driver.log&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;append&quot;</span> <span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;maxFileSize&quot;</span> <span class="na">value=</span><span class="s">&quot;1GB&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;maxBackupIndex&quot;</span> <span class="na">value=</span><span class="s">&quot;10&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;layout</span> <span class="na">class=</span><span class="s">&quot;org.apache.log4j.PatternLayout&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;ConversionPattern&quot;</span> <span class="na">value=</span><span class="s">&quot;%-5p [%d{ISO8601}] [%t] %F:%L - %m%n&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/layout&gt;</span>
  <span class="nt">&lt;/appender&gt;</span>
  
  <span class="c">&lt;!-- use AsyncAppender for lower latencies --&gt;</span>
  <span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">&quot;async&quot;</span> <span class="na">class=</span><span class="s">&quot;org.apache.log4j.AsyncAppender&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;BufferSize&quot;</span> <span class="na">value=</span><span class="s">&quot;500&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">&quot;file&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">&quot;console&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/appender&gt;</span>
  
  <span class="c">&lt;!--</span>
<span class="c">   Turn on slow query logging by setting this logger to DEBUG; </span>
<span class="c">   set level to TRACE to also log query parameters </span>
<span class="c">  --&gt;</span>
  <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">&quot;com.datastax.driver.core.QueryLogger.SLOW&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;level</span> <span class="na">value=</span><span class="s">&quot;DEBUG&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/logger&gt;</span>
  
  <span class="nt">&lt;root&gt;</span>
    <span class="nt">&lt;priority</span> <span class="na">value=</span><span class="s">&quot;ERROR&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">&quot;async&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/root&gt;</span>
  
<span class="nt">&lt;/log4j:configuration&gt;</span>
</pre></div>
</div>
</div>
</div>

        </div>

        <div id="sidebar" class="large-3 large-pull-6 columns"><div class="side-nav">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../api.html">API Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../address_resolution/index.html">Address resolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../async/index.html">Asynchronous programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auth/index.html">Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cloud/index.html">Connecting to Apollo (Cloud)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../compression/index.html">Compression</a></li>
<li class="toctree-l2"><a class="reference internal" href="../control_connection/index.html">Control connection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../custom_codecs/index.html">Custom Codecs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../custom_payloads/index.html">Custom Payloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../idempotence/index.html">Query idempotence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../load_balancing/index.html">Load balancing</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metadata/index.html">Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics/index.html">Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../native_protocol/index.html">Native protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../object_mapper/index.html">Object Mapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../osgi/index.html">OSGi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../paging/index.html">Paging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pooling/index.html">Connection pooling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../query_timestamps/index.html">Query timestamps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reconnection/index.html">Reconnection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../retries/index.html">Retries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shaded_jar/index.html">Using the shaded JAR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socket_options/index.html">Socket options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../speculative_execution/index.html">Speculative query execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ssl/index.html">SSL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../statements/index.html">Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tuples/index.html">Using Tuples with the Java driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../udts/index.html">User-defined types</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../upgrade_guide/index.html">Upgrade guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog/index.html">Changelog</a></li>
</ul>

</div>
        </div>

        <div class="large-3 columns">
            
        </div>

    </div>
</section>

<!-- newsleter modal -->

<div id="newsletter_signup" class="reveal-modal tiny radius dark_modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
    <a class="close-reveal-modal" aria-label="Close">×</a>
    <h2 id="modalTitle">Sign up for the Scylla newsletter</h2>
    <div id="mc_embed_signup">
        <form action="//cloudius-systems.us10.list-manage.com/subscribe/post?u=df8bb543c68230d5f7b4dcf78&amp;id=9a4589f144" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="">
            <div id="mc_embed_signup_scroll">

                <div class="mc-field-group">
                    <div class="row collapse">
                        <div class="small-3 columns"><label for="mce-EMAIL">Email</label></div>
                        <div class="small-9 columns"><input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL"></div>
                    </div>
                </div>
                <div class="mc-field-group">
                    <div class="row collapse">
                        <div class="small-3 columns"><label for="mce-FNAME">First Name </label></div>
                        <div class="small-9 columns"><input type="text" value="" name="FNAME" class="" id="mce-FNAME"></div>
                    </div>
                </div>
                <div class="mc-field-group">
                    <div class="row collapse">
                        <div class="small-3 columns"><label for="mce-LNAME">Last Name </label></div>
                        <div class="small-9 columns"><input type="text" value="" name="LNAME" class="" id="mce-LNAME"></div>
                    </div>
                </div>
                <div id="mce-responses" class="clear">
                    <div class="response" id="mce-error-response" style="display:none"></div>
                    <div class="response" id="mce-success-response" style="display:none"></div>
                </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                <div style="position: absolute; left: -5000px;"><input type="text" name="b_df8bb543c68230d5f7b4dcf78_9a4589f144" tabindex="-1" value=""></div>
                <div class="clear"><input type="submit" class="button" value="Sign up" name="subscribe" id="mc-embedded-subscribe"></div>
            </div>
        </form>
    </div>
</div>

<!-- end newsleter modal -->



<!-- footer.html -->
<footer id="footer">
    <div class="footer-top">
        <a class="logo" href="https://www.scylladb.com"><img src="../../_static/img/logo-scylla-horizontal-RGB.svg" alt=""></a>
        <div class="footer-links">
            <a class="link" href="https://docs.scylladb.com">Docs</a>
            <a class="link" href="https://www.scylladb.com/company/contact-us/">Contact Us</a>
            <a class="link" href="https://www.scylladb.com/company/">About Us</a>
            <a class="link button" href="https://github.com/scylladb/java-driver/issues/new?title=Issue in page Logging&&body=I%20would%20like%20to%20report%20an%20issue%20in%20page%20http://docs.scylladb.com/manual/logging/index%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix" target="_blank">
                Report an issue on this page</a>
        </div>
        <div class="footer-actions">
            <a class="link-icon" href="https://github.com/ScyllaDB" target="_blank">
                <span class="icon-github2"></span></a>
            <a class="link-icon" href="https://twitter.com/ScyllaDB" target="_blank">
                <span class="icon-twitter"></span></a>
            <a class="link-icon" href="https://www.linkedin.com/company/scylladb"  target="_blank">
                <span class="icon-linkedin2"></span></a>
            <a class="link-icon" href="https://www.facebook.com/scylladb/" target="_blank">
                <span class="icon-facebook"></span></a>
        </div>
    </div>

    <div class="footer-bottom">
        <div class="footer-info">
            <div class="footer-copyright">
                &#169; 2012, ScyllaDB. All rights reserved.
            </div>
            <div class="footer-last-updated">
                Last updated on 28 October 2020.
            </div>
        </div>
        <div class="footer-links">
        </div>
    </div>
</footer>
<!-- end footer.html -->

<!-- bodyscripts.html -->
<!-- at the end of the BODY --> 
<script src="../../_static/js/vendor/jquery.js"></script>
<script src="../../_static/expertrec.js"></script>
<script src="../../_static/js/foundation/foundation.js"></script>
<script src="../../_static/js/foundation/foundation.topbar.js"></script>
<script src="../../_static/app.js"></script>
<script>
    $(document).foundation();
</script>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T8P2JP"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

  <!-- end bodyscripts.html -->
</body>
</html>