<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DataStax Java Driver: com.datastax.driver.core.HostConnectionPoolTest Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DataStax Java Driver
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">com.datastax.driver.core.HostConnectionPoolTest Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Inherits com.datastax.driver.core.ScassandraTestBase.PerClassCluster.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>MockRequest</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>TestExecutorService</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abe35d74e847c7ca927d138e3266c914a"><td class="memItemLeft" align="right" valign="top"><a id="abe35d74e847c7ca927d138e3266c914a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>reinitializeCluster</b> ()</td></tr>
<tr class="separator:abe35d74e847c7ca927d138e3266c914a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3044ae3c7ba4baf87f467f247cb07e21"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html#a3044ae3c7ba4baf87f467f247cb07e21">fixed_size_pool_should_fill_its_core_connections_and_queue_and_then_reject</a> ()</td></tr>
<tr class="separator:a3044ae3c7ba4baf87f467f247cb07e21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a828aaf9c9119b8966efd1714a1baf633"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html#a828aaf9c9119b8966efd1714a1baf633">should_reject_if_enqueued_and_timeout_reached</a> ()</td></tr>
<tr class="separator:a828aaf9c9119b8966efd1714a1baf633"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4342fbd784f9c7da415f7ee2b196363f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html#a4342fbd784f9c7da415f7ee2b196363f">should_not_hang_when_executing_sync_queries</a> ()</td></tr>
<tr class="separator:a4342fbd784f9c7da415f7ee2b196363f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3712d2ead1049bf4e1c2d4b53afbd529"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html#a3712d2ead1049bf4e1c2d4b53afbd529">requests_with_enqueued_borrow_requests_should_be_failed_when_pool_closes</a> ()</td></tr>
<tr class="separator:a3712d2ead1049bf4e1c2d4b53afbd529"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a799808faeb4112948b9df66e8a019932"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html#a799808faeb4112948b9df66e8a019932">should_adjust_connection_keyspace_on_dequeue_if_pool_state_is_different</a> ()  throws TimeoutException, ExecutionException </td></tr>
<tr class="separator:a799808faeb4112948b9df66e8a019932"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab49544bf522c599f74b5daed50aad93b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html#ab49544bf522c599f74b5daed50aad93b">should_fail_in_borrowConnection_when_setting_keyspace_and_another_set_keyspace_attempt_is_in_flight</a> ()  throws TimeoutException </td></tr>
<tr class="separator:ab49544bf522c599f74b5daed50aad93b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98e70ff1d16a0084a1cbe1797e46422b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html#a98e70ff1d16a0084a1cbe1797e46422b">should_fail_in_dequeue_when_setting_keyspace_and_another_set_keyspace_attempt_is_in_flight</a> ()  throws ExecutionException, TimeoutException </td></tr>
<tr class="separator:a98e70ff1d16a0084a1cbe1797e46422b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1bc11788b4aada941fe9061864e64e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html#ad1bc11788b4aada941fe9061864e64e1">variable_size_pool_should_fill_its_connections_and_then_reject</a> ()  throws Exception </td></tr>
<tr class="separator:ad1bc11788b4aada941fe9061864e64e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc7abaed8b9cf8ce8d26d943d6f0769d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html#afc7abaed8b9cf8ce8d26d943d6f0769d">should_add_extra_connection_when_core_full</a> ()  throws Exception </td></tr>
<tr class="separator:afc7abaed8b9cf8ce8d26d943d6f0769d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab35f633f1a9dd137f7ac9674df08b813"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html#ab35f633f1a9dd137f7ac9674df08b813">should_resurrect_trashed_connection_within_idle_timeout</a> ()  throws Exception </td></tr>
<tr class="separator:ab35f633f1a9dd137f7ac9674df08b813"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31a484feaf314a839e9d9be27ddc131a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html#a31a484feaf314a839e9d9be27ddc131a">should_not_resurrect_trashed_connection_after_idle_timeout</a> ()  throws Exception </td></tr>
<tr class="separator:a31a484feaf314a839e9d9be27ddc131a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11858e73877ba0b46ea6283259c66b33"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html#a11858e73877ba0b46ea6283259c66b33">should_not_close_trashed_connection_until_no_in_flight</a> ()  throws Exception </td></tr>
<tr class="separator:a11858e73877ba0b46ea6283259c66b33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa24447a9e09ad584fa85c49fed1b3d91"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html#aa24447a9e09ad584fa85c49fed1b3d91">should_trash_on_returning_connection_with_insufficient_streams</a> ()  throws Exception </td></tr>
<tr class="separator:aa24447a9e09ad584fa85c49fed1b3d91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af84fbd9c965c0be667a796791de6b30f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html#af84fbd9c965c0be667a796791de6b30f">should_keep_host_up_when_one_connection_lost</a> ()  throws Exception </td></tr>
<tr class="separator:af84fbd9c965c0be667a796791de6b30f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb9ecda175de6098f152138f5d81a0d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html#afb9ecda175de6098f152138f5d81a0d0">should_mark_host_down_when_no_connections_remaining</a> ()  throws Exception </td></tr>
<tr class="separator:afb9ecda175de6098f152138f5d81a0d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e4ed3a361637ae453147a82e711d63c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html#a4e4ed3a361637ae453147a82e711d63c">should_create_new_connections_when_connection_lost_and_under_core_connections</a> ()  throws Exception </td></tr>
<tr class="separator:a4e4ed3a361637ae453147a82e711d63c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e8a4e98177a24a9f2f18c5ef422b1f8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html#a0e8a4e98177a24a9f2f18c5ef422b1f8">should_not_schedule_reconnect_when_connection_lost_and_at_core_connections</a> ()  throws Exception </td></tr>
<tr class="separator:a0e8a4e98177a24a9f2f18c5ef422b1f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8558b75d265e94afcb0eafa27c26ea9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html#ab8558b75d265e94afcb0eafa27c26ea9">should_not_mark_host_down_if_some_connections_fail_on_init</a> ()  throws Exception </td></tr>
<tr class="separator:ab8558b75d265e94afcb0eafa27c26ea9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73f216b83943abce61100a4c927b80e7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html#a73f216b83943abce61100a4c927b80e7">should_throw_exception_if_convicted_and_no_connections_available</a> ()</td></tr>
<tr class="separator:a73f216b83943abce61100a4c927b80e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9aa71ab2cf62f8ef833cc0a395f19e61"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html#a9aa71ab2cf62f8ef833cc0a395f19e61">should_wait_on_connection_if_not_convicted_and_no_connections_available</a> ()  throws Exception </td></tr>
<tr class="separator:a9aa71ab2cf62f8ef833cc0a395f19e61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79d17a4131b16925902654ebf8cbdde9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html#a79d17a4131b16925902654ebf8cbdde9">should_wait_on_connection_if_zero_core_connections</a> ()  throws Exception </td></tr>
<tr class="separator:a79d17a4131b16925902654ebf8cbdde9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ec24469fa8e4658a8e91a8c33682a26"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html#a4ec24469fa8e4658a8e91a8c33682a26">open_connections_metric_should_always_be_positive</a> ()  throws InterruptedException </td></tr>
<tr class="separator:a4ec24469fa8e4658a8e91a8c33682a26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e759293d07876d1003910ee17931742"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html#a2e759293d07876d1003910ee17931742">should_not_create_connections_if_zero_core_connections_and_reused_connection_on_reconnect</a> ()  throws Exception </td></tr>
<tr class="separator:a2e759293d07876d1003910ee17931742"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3044ae3c7ba4baf87f467f247cb07e21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3044ae3c7ba4baf87f467f247cb07e21">&#9670;&nbsp;</a></span>fixed_size_pool_should_fill_its_core_connections_and_queue_and_then_reject()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.HostConnectionPoolTest.fixed_size_pool_should_fill_its_core_connections_and_queue_and_then_reject </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ensures that if a fixed-sized pool has filled its core connections and reached its maximum number of enqueued requests, then borrowConnection will fail instead of creating a new connection.</p>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-419 </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>connection:connection_pool </dd></dl>
<dl class="section user"><dt>Since</dt><dd>2.0.10, 2.1.6 </dd></dl>

</div>
</div>
<a id="a4ec24469fa8e4658a8e91a8c33682a26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ec24469fa8e4658a8e91a8c33682a26">&#9670;&nbsp;</a></span>open_connections_metric_should_always_be_positive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.HostConnectionPoolTest.open_connections_metric_should_always_be_positive </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws InterruptedException</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This test uses a table named "Java349" with 1000 column and performs asynchronously 100k insertions. While the insertions are being executed, the number of opened connection is monitored.</p>
<p>If at anytime, the number of opened connections is negative, this test will fail.</p>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-349 </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>connection:connection_pool </dd></dl>
<dl class="section user"><dt>Since</dt><dd>2.0.6, 2.1.1 </dd></dl>

</div>
</div>
<a id="a3712d2ead1049bf4e1c2d4b53afbd529"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3712d2ead1049bf4e1c2d4b53afbd529">&#9670;&nbsp;</a></span>requests_with_enqueued_borrow_requests_should_be_failed_when_pool_closes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.HostConnectionPoolTest.requests_with_enqueued_borrow_requests_should_be_failed_when_pool_closes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ensures that any enqueued connection borrow requests are failed when their associated connection pool closes.</p>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-839 </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>connection:connection_pool </dd></dl>
<dl class="section user"><dt>Since</dt><dd>3.0.4, 3.1.1 </dd></dl>

</div>
</div>
<a id="afc7abaed8b9cf8ce8d26d943d6f0769d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc7abaed8b9cf8ce8d26d943d6f0769d">&#9670;&nbsp;</a></span>should_add_extra_connection_when_core_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.HostConnectionPoolTest.should_add_extra_connection_when_core_full </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ensures that if the core connection pool is full that borrowConnection will create and use a new connection.</p>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-419 </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>connection:connection_pool </dd></dl>
<dl class="section user"><dt>Since</dt><dd>2.0.10, 2.1.6 </dd></dl>

</div>
</div>
<a id="a799808faeb4112948b9df66e8a019932"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a799808faeb4112948b9df66e8a019932">&#9670;&nbsp;</a></span>should_adjust_connection_keyspace_on_dequeue_if_pool_state_is_different()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.HostConnectionPoolTest.should_adjust_connection_keyspace_on_dequeue_if_pool_state_is_different </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws TimeoutException, ExecutionException</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Validates that if the keyspace tied to the Session's pool state is different than the keyspace on the connection being used in dequeue that <a class="el" href="">Connection#setKeyspaceAsync(String)</a> is set on that connection and that "USE keyspace" is only called once since setKeyspaceAsync should not attempt setting the keyspace if there is already a request inflight that is doing this.</p>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-839 </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>connection:connection_pool </dd></dl>
<dl class="section user"><dt>Since</dt><dd>3.0.4, 3.1.1 </dd></dl>

</div>
</div>
<a id="a4e4ed3a361637ae453147a82e711d63c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e4ed3a361637ae453147a82e711d63c">&#9670;&nbsp;</a></span>should_create_new_connections_when_connection_lost_and_under_core_connections()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.HostConnectionPoolTest.should_create_new_connections_when_connection_lost_and_under_core_connections </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ensures that if a connection on a host is lost that brings the number of active connections in a pool under core connection count that up to core connections are re-established, but only after the next reconnect schedule has elapsed.</p>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-544 </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>connection:connection_pool </dd></dl>
<dl class="section user"><dt>Since</dt><dd>2.0.11 </dd></dl>

</div>
</div>
<a id="ab49544bf522c599f74b5daed50aad93b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab49544bf522c599f74b5daed50aad93b">&#9670;&nbsp;</a></span>should_fail_in_borrowConnection_when_setting_keyspace_and_another_set_keyspace_attempt_is_in_flight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.HostConnectionPoolTest.should_fail_in_borrowConnection_when_setting_keyspace_and_another_set_keyspace_attempt_is_in_flight </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws TimeoutException</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ensures that on borrowConnection if a set keyspace attempt is in progress on that connection for a different keyspace than the pool state that the borrowConnection future returned is failed.</p>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-839 </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>connection:connection_pool </dd></dl>
<dl class="section user"><dt>Since</dt><dd>3.0.4, 3.1.1 </dd></dl>

</div>
</div>
<a id="a98e70ff1d16a0084a1cbe1797e46422b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98e70ff1d16a0084a1cbe1797e46422b">&#9670;&nbsp;</a></span>should_fail_in_dequeue_when_setting_keyspace_and_another_set_keyspace_attempt_is_in_flight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.HostConnectionPoolTest.should_fail_in_dequeue_when_setting_keyspace_and_another_set_keyspace_attempt_is_in_flight </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws ExecutionException, TimeoutException</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ensures that while dequeuing borrow connection requests that if a set keyspace attempt is in progress on that connection for a difference keyspace than the pool state that the future for that borrow attempt is failed.</p>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-839 </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>connection:connection_pool </dd></dl>
<dl class="section user"><dt>Since</dt><dd>3.0.4, 3.1.1 </dd></dl>

</div>
</div>
<a id="af84fbd9c965c0be667a796791de6b30f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af84fbd9c965c0be667a796791de6b30f">&#9670;&nbsp;</a></span>should_keep_host_up_when_one_connection_lost()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.HostConnectionPoolTest.should_keep_host_up_when_one_connection_lost </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ensures that if a connection on a host is lost but other connections remain intact in the Pool that the host is not marked down.</p>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-544 </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>connection:connection_pool </dd></dl>
<dl class="section user"><dt>Since</dt><dd>2.0.11 </dd></dl>

</div>
</div>
<a id="afb9ecda175de6098f152138f5d81a0d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb9ecda175de6098f152138f5d81a0d0">&#9670;&nbsp;</a></span>should_mark_host_down_when_no_connections_remaining()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.HostConnectionPoolTest.should_mark_host_down_when_no_connections_remaining </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ensures that if all connections on a host are closed that the host is marked down and the control connection is notified of that fact and re-established itself.</p>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-544 </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>connection:connection_pool </dd></dl>
<dl class="section user"><dt>Since</dt><dd>2.0.11 </dd></dl>

</div>
</div>
<a id="a11858e73877ba0b46ea6283259c66b33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11858e73877ba0b46ea6283259c66b33">&#9670;&nbsp;</a></span>should_not_close_trashed_connection_until_no_in_flight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.HostConnectionPoolTest.should_not_close_trashed_connection_until_no_in_flight </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ensures that a trashed connection that has been timed out should not be closed until it has 0 in flight requests.</p>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-419 </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>connection:connection_pool </dd></dl>
<dl class="section user"><dt>Since</dt><dd>2.0.10, 2.1.6 </dd></dl>

</div>
</div>
<a id="a2e759293d07876d1003910ee17931742"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e759293d07876d1003910ee17931742">&#9670;&nbsp;</a></span>should_not_create_connections_if_zero_core_connections_and_reused_connection_on_reconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.HostConnectionPoolTest.should_not_create_connections_if_zero_core_connections_and_reused_connection_on_reconnect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ensures that on a a host is bring up with a reused connection and zero core connections the driver do not try to create any connections.</p>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-1794 </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>connection:connection_pool </dd></dl>
<dl class="section user"><dt>Since</dt><dd>3.5.1 </dd></dl>

</div>
</div>
<a id="a4342fbd784f9c7da415f7ee2b196363f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4342fbd784f9c7da415f7ee2b196363f">&#9670;&nbsp;</a></span>should_not_hang_when_executing_sync_queries()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.HostConnectionPoolTest.should_not_hang_when_executing_sync_queries </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Validates that if a borrow request is enqueued into a pool for a Host that is currently within the window of reconnecting after an error that the future tied to that query times out after <a class="el" href="">PoolingOptions#setPoolTimeoutMillis(int)</a>.</p>
<p>This primarily serves to demonstrate that the use case described in JAVA-1371 is fixed by using <a class="el" href="">Session#execute(Statement)</a> shortly after a server error on a connection.</p>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-1371 </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>connection:connection_pool </dd></dl>
<dl class="section user"><dt>Since</dt><dd>3.0.7 3.1.4 3.2.0 </dd></dl>

</div>
</div>
<a id="ab8558b75d265e94afcb0eafa27c26ea9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8558b75d265e94afcb0eafa27c26ea9">&#9670;&nbsp;</a></span>should_not_mark_host_down_if_some_connections_fail_on_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.HostConnectionPoolTest.should_not_mark_host_down_if_some_connections_fail_on_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ensures that if some connections fail on pool init that the host and subsequently the control connection is not marked down. The test also ensures that when making requests on the pool that connections are brought up to core.</p>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-544 </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>connection:connection_pool </dd></dl>
<dl class="section user"><dt>Since</dt><dd>2.0.11 </dd></dl>

</div>
</div>
<a id="a31a484feaf314a839e9d9be27ddc131a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31a484feaf314a839e9d9be27ddc131a">&#9670;&nbsp;</a></span>should_not_resurrect_trashed_connection_after_idle_timeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.HostConnectionPoolTest.should_not_resurrect_trashed_connection_after_idle_timeout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ensures that a trashed connection that has been timed out should not be resurrected into the connection pool if borrowConnection is called and a new connection is needed.</p>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-419 </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>connection:connection_pool </dd></dl>
<dl class="section user"><dt>Since</dt><dd>2.0.10, 2.1.6 </dd></dl>

</div>
</div>
<a id="a0e8a4e98177a24a9f2f18c5ef422b1f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e8a4e98177a24a9f2f18c5ef422b1f8">&#9670;&nbsp;</a></span>should_not_schedule_reconnect_when_connection_lost_and_at_core_connections()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.HostConnectionPoolTest.should_not_schedule_reconnect_when_connection_lost_and_at_core_connections </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ensures that if a connection on a host is lost and the number of remaining connections is at core connection count that no connections are re-established until after there are enough inflight requests to justify creating one and the reconnection interval has elapsed.</p>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-544 </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>connection:connection_pool </dd></dl>
<dl class="section user"><dt>Since</dt><dd>2.0.11 </dd></dl>

</div>
</div>
<a id="a828aaf9c9119b8966efd1714a1baf633"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a828aaf9c9119b8966efd1714a1baf633">&#9670;&nbsp;</a></span>should_reject_if_enqueued_and_timeout_reached()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.HostConnectionPoolTest.should_reject_if_enqueued_and_timeout_reached </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ensures that if a fixed-sized pool has filled its core connections and reached a number of requests to cause it to be enqueued, that if the request is not serviced within 100ms, a BusyPoolException is raised with a timeout.</p>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-1371 </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>connection:connection_pool </dd></dl>
<dl class="section user"><dt>Since</dt><dd>3.0.7 3.1.4 3.2.0 </dd></dl>

</div>
</div>
<a id="ab35f633f1a9dd137f7ac9674df08b813"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab35f633f1a9dd137f7ac9674df08b813">&#9670;&nbsp;</a></span>should_resurrect_trashed_connection_within_idle_timeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.HostConnectionPoolTest.should_resurrect_trashed_connection_within_idle_timeout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ensures that a trashed connection that has not been timed out should be resurrected into the connection pool if borrowConnection is called and a new connection is needed.</p>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-419 </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>connection:connection_pool </dd></dl>
<dl class="section user"><dt>Since</dt><dd>2.0.10, 2.1.6 </dd></dl>

</div>
</div>
<a id="a73f216b83943abce61100a4c927b80e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73f216b83943abce61100a4c927b80e7">&#9670;&nbsp;</a></span>should_throw_exception_if_convicted_and_no_connections_available()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.HostConnectionPoolTest.should_throw_exception_if_convicted_and_no_connections_available </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ensures that if all connections fail on pool init that the host and subsequently the control connection is not marked down since the control connection is still active. The test also ensures that borrow attempts on the pool fail if we are still in the reconnection window according to the ConvictionPolicy.</p>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-544 </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>connection:connection_pool </dd></dl>
<dl class="section user"><dt>Since</dt><dd>2.0.11 </dd></dl>

</div>
</div>
<a id="aa24447a9e09ad584fa85c49fed1b3d91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa24447a9e09ad584fa85c49fed1b3d91">&#9670;&nbsp;</a></span>should_trash_on_returning_connection_with_insufficient_streams()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.HostConnectionPoolTest.should_trash_on_returning_connection_with_insufficient_streams </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ensures that if a connection that has less than the minimum available stream ids is returned to the pool that the connection is put in the trash.</p>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-419 </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>connection:connection_pool </dd></dl>
<dl class="section user"><dt>Since</dt><dd>2.0.10, 2.1.6 </dd></dl>

</div>
</div>
<a id="a9aa71ab2cf62f8ef833cc0a395f19e61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9aa71ab2cf62f8ef833cc0a395f19e61">&#9670;&nbsp;</a></span>should_wait_on_connection_if_not_convicted_and_no_connections_available()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.HostConnectionPoolTest.should_wait_on_connection_if_not_convicted_and_no_connections_available </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ensures that if all connections fail on pool init that the host and subsequently the control connection is not marked down. The test also ensures that when making requests on the pool after the conviction period that all core connections are created.</p>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-544 </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>connection:connection_pool </dd></dl>
<dl class="section user"><dt>Since</dt><dd>2.0.11 </dd></dl>

</div>
</div>
<a id="a79d17a4131b16925902654ebf8cbdde9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79d17a4131b16925902654ebf8cbdde9">&#9670;&nbsp;</a></span>should_wait_on_connection_if_zero_core_connections()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.HostConnectionPoolTest.should_wait_on_connection_if_zero_core_connections </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ensures that if a pool is created with zero core connections that when a request is first sent that one and only one connection is created and that it waits on availability of that connection and returns it.</p>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-544 </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>connection:connection_pool </dd></dl>
<dl class="section user"><dt>Since</dt><dd>2.0.11 </dd></dl>

</div>
</div>
<a id="ad1bc11788b4aada941fe9061864e64e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1bc11788b4aada941fe9061864e64e1">&#9670;&nbsp;</a></span>variable_size_pool_should_fill_its_connections_and_then_reject()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.HostConnectionPoolTest.variable_size_pool_should_fill_its_connections_and_then_reject </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ensures that if a variable-sized pool has filled up to its maximum connections that borrowConnection will return a failed future instead of creating a new connection.</p>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-419 </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>connection:connection_pool </dd></dl>
<dl class="section user"><dt>Since</dt><dd>2.0.10, 2.1.6 </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>HostConnectionPoolTest.java</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>com</b></li><li class="navelem"><b>datastax</b></li><li class="navelem"><b>driver</b></li><li class="navelem"><b>core</b></li><li class="navelem"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_host_connection_pool_test.html">HostConnectionPoolTest</a></li>
    <li class="footer">Generated on Tue Oct 20 2020 09:43:12 for DataStax Java Driver by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
