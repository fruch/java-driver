<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DataStax Java Driver: com.datastax.driver.core.ConnectionReleaseTest Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DataStax Java Driver
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classcom_1_1datastax_1_1driver_1_1core_1_1_connection_release_test.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classcom_1_1datastax_1_1driver_1_1core_1_1_connection_release_test-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">com.datastax.driver.core.ConnectionReleaseTest Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for com.datastax.driver.core.ConnectionReleaseTest:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classcom_1_1datastax_1_1driver_1_1core_1_1_connection_release_test.png" usemap="#com.datastax.driver.core.ConnectionReleaseTest_map" alt=""/>
  <map id="com.datastax.driver.core.ConnectionReleaseTest_map" name="com.datastax.driver.core.ConnectionReleaseTest_map">
<area href="classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base.html" alt="com.datastax.driver.core.ScassandraTestBase" shape="rect" coords="0,0,289,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2851b70c1c1ef17314dea4571b809b21"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_connection_release_test.html#a2851b70c1c1ef17314dea4571b809b21">should_release_connection_before_completing_future</a> ()  throws Exception </td></tr>
<tr class="separator:a2851b70c1c1ef17314dea4571b809b21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base.html">com.datastax.driver.core.ScassandraTestBase</a></td></tr>
<tr class="memitem:a5c25673dfe2d6b6a3735f7447173ea98 inherit pub_methods_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td class="memItemLeft" align="right" valign="top"><a id="a5c25673dfe2d6b6a3735f7447173ea98"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>beforeTestClass</b> ()</td></tr>
<tr class="separator:a5c25673dfe2d6b6a3735f7447173ea98 inherit pub_methods_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88fff63cfc22d065ea1ed10384a09bcb inherit pub_methods_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td class="memItemLeft" align="right" valign="top"><a id="a88fff63cfc22d065ea1ed10384a09bcb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>afterTestClass</b> ()</td></tr>
<tr class="separator:a88fff63cfc22d065ea1ed10384a09bcb inherit pub_methods_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75b380f8f1e74c8091c760e56179c9e2 inherit pub_methods_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td class="memItemLeft" align="right" valign="top"><a id="a75b380f8f1e74c8091c760e56179c9e2"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>resetClients</b> ()</td></tr>
<tr class="separator:a75b380f8f1e74c8091c760e56179c9e2 inherit pub_methods_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base.html">com.datastax.driver.core.ScassandraTestBase</a></td></tr>
<tr class="memitem:a828c7a60a8c979ef9feb2bcb4f4c2eeb inherit pro_methods_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td class="memItemLeft" align="right" valign="top"><a id="a828c7a60a8c979ef9feb2bcb4f4c2eeb"></a>
Cluster.Builder&#160;</td><td class="memItemRight" valign="bottom"><b>createClusterBuilder</b> ()</td></tr>
<tr class="separator:a828c7a60a8c979ef9feb2bcb4f4c2eeb inherit pro_methods_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06b77dbee48f5cd056a26269035ad212 inherit pro_methods_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td class="memItemLeft" align="right" valign="top"><a id="a06b77dbee48f5cd056a26269035ad212"></a>
Host&#160;</td><td class="memItemRight" valign="bottom"><b>retrieveSingleHost</b> (Cluster cluster)</td></tr>
<tr class="separator:a06b77dbee48f5cd056a26269035ad212 inherit pro_methods_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base.html">com.datastax.driver.core.ScassandraTestBase</a></td></tr>
<tr class="memitem:a9640ea8431c2ecd2e5461135a30f5907 inherit pro_attribs_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td class="memItemLeft" align="right" valign="top"><a id="a9640ea8431c2ecd2e5461135a30f5907"></a>
Scassandra&#160;</td><td class="memItemRight" valign="bottom"><b>scassandra</b></td></tr>
<tr class="separator:a9640ea8431c2ecd2e5461135a30f5907 inherit pro_attribs_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2791179a224f1eeeca139b1361e81ae6 inherit pro_attribs_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td class="memItemLeft" align="right" valign="top"><a id="a2791179a224f1eeeca139b1361e81ae6"></a>
EndPoint&#160;</td><td class="memItemRight" valign="bottom"><b>hostEndPoint</b></td></tr>
<tr class="separator:a2791179a224f1eeeca139b1361e81ae6 inherit pro_attribs_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc537d7c38c16dd12b23af95003c4f22 inherit pro_attribs_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td class="memItemLeft" align="right" valign="top"><a id="abc537d7c38c16dd12b23af95003c4f22"></a>
PrimingClient&#160;</td><td class="memItemRight" valign="bottom"><b>primingClient</b></td></tr>
<tr class="separator:abc537d7c38c16dd12b23af95003c4f22 inherit pro_attribs_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e944262aa34ba07213e850d5b073638 inherit pro_attribs_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td class="memItemLeft" align="right" valign="top"><a id="a5e944262aa34ba07213e850d5b073638"></a>
ActivityClient&#160;</td><td class="memItemRight" valign="bottom"><b>activityClient</b></td></tr>
<tr class="separator:a5e944262aa34ba07213e850d5b073638 inherit pro_attribs_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86dac6fd6a3a48bf3ff0fa6247ce5588 inherit pro_attribs_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td class="memItemLeft" align="right" valign="top"><a id="a86dac6fd6a3a48bf3ff0fa6247ce5588"></a>
CurrentClient&#160;</td><td class="memItemRight" valign="bottom"><b>currentClient</b></td></tr>
<tr class="separator:a86dac6fd6a3a48bf3ff0fa6247ce5588 inherit pro_attribs_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_static_attribs_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td colspan="2" onclick="javascript:toggleInherit('pro_static_attribs_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base')"><img src="closed.png" alt="-"/>&#160;Static Protected Attributes inherited from <a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base.html">com.datastax.driver.core.ScassandraTestBase</a></td></tr>
<tr class="memitem:a735c198f9f9a4bfbf8ce345a569ecd37 inherit pro_static_attribs_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td class="memItemLeft" align="right" valign="top"><a id="a735c198f9f9a4bfbf8ce345a569ecd37"></a>
static String&#160;</td><td class="memItemRight" valign="bottom"><b>ip</b> = <a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_test_utils.html#ab966e6b3c95bc0c8154aef0dc04360cd">TestUtils.ipOfNode</a>(1)</td></tr>
<tr class="separator:a735c198f9f9a4bfbf8ce345a569ecd37 inherit pro_static_attribs_classcom_1_1datastax_1_1driver_1_1core_1_1_scassandra_test_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2851b70c1c1ef17314dea4571b809b21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2851b70c1c1ef17314dea4571b809b21">&#9670;&nbsp;</a></span>should_release_connection_before_completing_future()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com.datastax.driver.core.ConnectionReleaseTest.should_release_connection_before_completing_future </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Validates that when a future is set that the stream associated with the future's request is released. This prevents situations where a user may not be specifying a separate executor on a callback/ transform to a ResultSetFuture, which is not recommended, causing executeAsync to block in borrowConnection until stream ids become available.</p>
<p>Executes the following:</p>
<ol>
<li>
Sets # of connections per host to 1. </li>
<li>
Sends MAX_STREAM_PER_CONNECTION-1 requests that take 10 seconds to execute. </li>
<li>
Calls executeAsync to retrieve records from test1 with k=1. </li>
<li>
Transforms executeAsync to take the 'c' column from the result and query test2. This is done without an executor to ensure the netty worker is used and has to wait for the function completion. </li>
<li>
Asserts that the transformed future completes within pool timeout and the value is as expected. </li>
</ol>
<dl class="section user"><dt>JIRA Ticket</dt><dd>JAVA-666 </dd></dl>
<dl class="section user"><dt>Expected Result</dt><dd>Are able to transform a Future without hanging in executeAsync as connection should be freed before the transform function is called. </dd></dl>
<dl class="section user"><dt>Test Category</dt><dd>queries:async </dd></dl>
<dl class="section user"><dt>Since</dt><dd>2.0.10, 2.1.6 </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>ConnectionReleaseTest.java</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>com</b></li><li class="navelem"><b>datastax</b></li><li class="navelem"><b>driver</b></li><li class="navelem"><b>core</b></li><li class="navelem"><a class="el" href="classcom_1_1datastax_1_1driver_1_1core_1_1_connection_release_test.html">ConnectionReleaseTest</a></li>
    <li class="footer">Generated on Tue Oct 20 2020 09:43:12 for DataStax Java Driver by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
